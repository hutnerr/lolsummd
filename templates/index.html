{% extends "base.html" %}
{% block title %}lolsummd - Home{% endblock %}
{% block content %}
<!-- <div id="overview">
    <h2>Overview</h2>
    <p>lolsummd allows you to combine the champion mastery data of multiple League of Legends accounts into one big summary.</p>
</div> -->

<form method="POST" action="/" id="addAccountForm" class="centered">
    <div class="input-box">
        <input type="text" name="username" placeholder="Username" required>
        <input type="text" name="tag" placeholder="Tag" required>
    </div>
    <button type="submit">Add Account</button>
    <input type="hidden" name="action" value="add">
</form>

<div id="accounts">
    {% if accounts %}
    <div class="centered">
        <form method="POST" action="/">
            <input type="hidden" name="action" value="submit_all">
            <button type="submit">Submit All Accounts</button>
        </form>
    
        <form method="POST" action="/">
            <input type="hidden" name="action" value="clear">
            <button type="submit">Clear All</button>
        </form>
    </div>
    
    <ul>
        {% for username, tag in accounts %}
        <li class="centered">
            {{ username }}#{{ tag }}
            <form method="POST" action="/" class="centered">
                <input type="hidden" name="action" value="remove">
                <input type="hidden" name="remove_index" value="{{ loop.index0 }}">
                <button type="submit">Remove</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>

{% if result %}
<div id="output">
    <h3>Combined Mastery Summary</h3>
    <table>
        <thead>
            <tr>
                <th>Rank</th>
                <th>Champion</th>
                <th>Mastery Level</th>
                <th>Mastery Points</th>
            </tr>
        </thead>
        <tbody>
            {% for champ_name, mastery_data in result %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ champ_name }}</td>
                <td>{{ mastery_data['level'] }}</td>
                <td>{{ "{:,}".format(mastery_data['points']) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div id="output">
</div>
{% endif %}
{% endblock %}